目标一：

a.了解云计算的概念。

b.理解云计算的部署模式和服务模式。

c.熟悉阿里云云计算产品。

d.掌握阿里云中地域和可用区的概念。

### 1.云计算的概念

#### 1.1.1云计算的概念

传统IT部署方式—自建机房。

机房：电力、空调、机柜

硬件：服务器、交换机、路由器、防火墙、IPS、IDS

软件：操作系统、网站服务器软件、数据

人员：施工、维护、数据库管理员、系统管理员、网络管理员。



云计算是一种新的服务模式——购买服务。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/1.png)

#### 1.1.2云计算部署模式：

云计算按照拥有者和使用者的不同主要分为下面三种部署模式：

- 专有云：私有云，属于企业内部自行构建的云环境。
- 公有云：云服务商提供云计算服务，用户通过互联网进行连接和使用
- 混合云：企业内部云和公有云互通，具有私有云的私密性兼具公有云的灵活性。

云计算根据对用户所提供的服务不同划分了多种不同的服务模式，最常见的服务模式主要有三种：

- IaaS：
  - 基础设施即服务，为用户直接提供计算资源、存储资源、网络资源等。
  - 只为用户提供相应资源，用户需要自行构建自身系统，可操纵性最高。一般云服务商都会提供该服务模式。	

- PaaS：
  - 平台即服务，为开发者提供按需开发环境。
  - 主要针对开发者用户提供一个开发、测试等使用云环境。

- SaaS：
  - 软件即服务，为用户提供按需软件服务。
  - 云服务商管理和提供软件，用户直接使用云服务商软件。

#### 1.2 阿里云发展历程

阿里云创立于2009年，2017年1月成为奥运会全球指定云服务商。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/2.png)

#### 1.3阿里云产品全家福

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/3.png)

计算类：

​	阿里云弹性计算类产品主要为用户提供计算相关的服务，最常用的**弹性计算类**产品有：

- 云服务器ECS：安全型、内存型、进阶型到入门型的的云服务器

- 弹性裸金属服务器（神龙）：兼具虚拟机的弹性和物理机的高性能、安全物理隔离、分钟交付、云产品全兼容。

- 超级计算集群：支持RDMA 提供极致并行计算性能实例规格。

- 弹性伸缩：自动调整弹性计算资源的管理服务。

存储类：

​	阿里云存储类产品主要为用户提供数据存储类服务。最常用的存储类产品有：

- 对象存储OSS：比传统存储成本下降25%~75%的强安全企业级存储。

- 块存储：可弹性扩展、高性能、高可靠的块级随机存储。

- 文件存储NAS：支持NFS、CIFS 协议的可共享文件存储。

- 云存储网关：可在线下和云上部署的软网关。

- 混合云存储阵列：集成了阿里云云存储网关的企业级统一存储阵列。

网络类：

​	阿里云网络类产品主要为用户提供阿里云内资源互通以及云内资源和公网连接。

​	最常用的网络类产品有：

- 专有网络VPC：构建逻辑隔离网络，确保资源安全。

- 负载均衡SLB：对多台云服务器进行流量分发的负载均衡服务

- NAT网关：支持NAT转发、共享带宽的VPC网关。

- 弹性公网IP：独立的公网IP资源

- 云企业网：帮助用户打造具有企业级规模和通信能力的云上网络。

- VPN网关：安全加密的云上云下数据互通方案。

数据库类产品：

​	阿里云数据库类产品主要为用户提供数据库解决方案。最常用的数据库类产品有：

- 云数据库PolarDB：自研全新一代云数据库。

- 云数据库RDS MySql 版

- 数据传输服务DTS

- 数据管理DMS

安全类：

​	阿里云安全类产品主要为保护用户数据和业务的安全，最常用的安全类产品有：

- DDos高防IP：300G按天服务，防御超大流程DDos攻击。

- Web应用防火墙：防注入，防CC，一站式Web安全解决方案。

- 云防火墙：基于业务可视的结果、实现业务梳理和业务隔离。

- 云安全中心（安骑士）：全方位服务器安全检测、相应和防护。

#### 1.4 阿里云产品架构

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/4.png)

#### 1.5阿里云基础架构

地域和可用区

- 地域(Region)是阿里云基于地理位置进行划分，资源创建成功后不能修改地域。不同地域的阿里云资源也会略有不同。
- 可用区（Zone）是指在同一地域内，电力和网络互相独立的物理区域。同一可用区内实例之间的网络延时更小。

资源多地域或多可用区部署？——提高多可用性

地域和可用区的关系。

每个地域完全独立。每个可用区完全隔离，但同一个地域内的可用区之间使用低时延链路相连。

![5](5.png)

如何选择合适的地域和可用区？

选择地域时，需要考虑的因素：

- ​	地理位置：根据目标用户所在的地理位置选择地域。

- ​	阿里云产品之间的关系

- ​	资源的价格

- ​	经营许可证备案

选择可用区时，需要考虑的因素：

- ​	在同一地域内可用区与可用区之间内网互通，可用区之间能做到故障隔离。是否将实例放在同一可用区内，主要取决于对容灾能力和网络延时的要求。

完整的服务体系：

- 全天候的工单支持体系
- 唾手可得的自助服务—帮助中心
- 共建互助的开发者社区
- 多元化的合作生态—服务市场
- 完整专业的培训认证

------

目标二：

a.理解阿里云云服务器ECS的概念

b.了解ECS的使用场景和实例规格

c.理解阿里云弹性裸金属服务器EBM的特点

d.掌握EBM的特点

e.理解创建和使用ECS

f.阿里云ECS的产品优势

g.阿里云ECS的实例规格

h.阿里云弹性裸金属服务器（神龙）

i.阿里云OSS的概念

### 2.阿里云ECS

#### 2.1阿里云ECS的概念

阿里云云服务器ECS：

- 云服务器（Elastic Compute Service，ECS）是阿里云提供的性能卓越、稳定可靠、弹性扩展的IaaS（Infrastructure as a Service）级别云计算服务。

- 云服务器ECS免去了采购IT硬件的前期准备，像使用水、电、天然气等公共资源一样便携、高效地使用服务器，实现计算资源的即开即用和弹性伸缩。阿里云ECS持续提供创新型服务器，解决多种业务需求，助力企业的业务发展。

ECS的组件架构图：

云服务ECS及其他阿里云产品关系如图。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/6.ECS%E7%9A%84%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E5%9B%BE.png)



ECS部署建议：

阿里云ECS在部署前需要进行规划，需要考虑的因素主要有：

地域和可用区、高可用性、网络规划、安全方案。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/7.ECS%E9%83%A8%E7%BD%B2%E5%BB%BA%E8%AE%AE.png)

ECS适用场景：

1.企业官网或轻量的Web应用

2.多媒体以及高并发应用或网站

3.高I/O要求数据库

4.访问量波动剧烈的应用或网站

5.大数据及实时在线或离线分析

6.机器学习和深度学习等AI应用

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/8-1.ECS%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF.png)

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/8-2.ECS%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF.png)

#### 2.2ECS的优势

阿里云弹性计算10年身后技术积淀，技术领先、性能优异、稳如磐石。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/9.ECS%E4%BC%98%E5%8A%BF.png)

**ECS和IDC对比：**

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/10.ECS%E5%92%8CIDC%E5%AF%B9%E6%AF%94.png)

#### 2.3 ECS的实例规格

ECS的常用概念：

实例：一台云服务器ECS实例等同于一台虚拟机，包含vCPU、内存、操作系统、网络、磁盘等最寄出的计算组件，可以方便的定制、更改实例的配置。

实例规格：根据业务场景，ECS实例可以分为多个规格族，同一个规格族里，根据vCPU和内存的配置，可以分为多种不同的规格。不同实例规格具有不同的vCPU和内存等配置，包括物理CPU型号、主频等。某些软件或应用对实例规格的配置有要求。

系统存储：一台EC实例必须包含一块系统盘，用来存储操作系统和核心配置。镜像主要用于初始化系统盘，决定ECS实例的操作系统和初始软件配置。

网络类型：ECS实例区分网络类型。实例在相同的网络中，例如同一个VPC，可以使用私网IP地址通过内网通信。

实例的生命周期：

创建实例—准备中—启动中—运行中—停止中—已停止—删除实例。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/11.%E5%AE%9E%E4%BE%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png)
**阿里云中ECS的实例规格族：**

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/12.%E5%AE%9E%E4%BE%8B%E8%A7%84%E6%A0%BC%E6%97%8F.png)

#### 2.4 弹性裸金属服务器（神龙）EBM

弹性裸金属服务器（神龙）概念：

​	弹性裸金属服务器（ECS Bare Metal Instance） 是基于达礼运完全自主研发的下一代虚拟化技术而打造的新型计算类服务产品，兼具虚拟机的弹性和物理机的性能及功能特性。与上一代虚拟化技术相比，下一代虚拟化技术不仅保留了普通云服务器的弹性体验，而且保证了物理机的性能与特性，全面**支持嵌套虚拟化**技术。

![13.EBM](13.EBM.png)

弹性裸金属服务器特点：

- 弹性裸金属服务器融合了物理机与云服务器的各自优势，实现超强超稳的计算能力。业务应用可以直接访问弹性裸金属服务器和内存，无任何虚拟化开销。
- 弹性裸金属服务器通过自研芯片和自研Hypervisor系统软件，打造了全球领先的深度融合物理机和虚拟机特性的创新型计算架构。能与阿里云产品家族中的其他计算产品无缝对接。

！[](https://github.com/yuhongwei380/ACA/blob/main/Image/14.EBM%E5%AE%9E%E4%BE%8B.png)

弹性裸金属服务器的优势和使用场景

![15.EBM的优势和使用场景](15.EBM%E7%9A%84%E4%BC%98%E5%8A%BF%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF.png)

#### 2.5 阿里云ECS的使用

#####   2.5.1 ECS购买的流程

实例的创建：基础配置—网络—系统配置—完成购买

![16.购买ECS](16.%E8%B4%AD%E4%B9%B0ECS.png)

阿里云中的镜像

- ECS镜像提供了创建ECS实例所需的信息，创建ECS时，必须选择镜像。镜像文件相当于副本文件，该副本文件包含了一块或多块云盘中的所有数据，对于ECS而言，这些云盘可以是单块系统盘，也可以是系统盘加数据盘的组合。

- 阿里云中ECS使用的镜像的分类：

<img src="17.%E9%95%9C%E5%83%8F%E7%B1%BB%E5%9E%8B.png" alt="17.镜像类型" style="zoom:150%;" />

ECS的连接方式：

云服务器ECS支持通过多种方式连接实例，包括Workbench、VNC和第三方客户端工具。

![18.连接ECS的方式](18.%E8%BF%9E%E6%8E%A5ECS%E7%9A%84%E6%96%B9%E5%BC%8F.png)

VNC连接不需要公网IP，其余均需要固定公网IP或EIP。



重置实例密码：

​	如果主机密码遗忘，如何或者主机的控制权？

​	—重置密码功能

![19.重置实例密码](19.%E9%87%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B%E5%AF%86%E7%A0%81.png)



------

目标：

a.理解对象存储的概念

b.了解存储空间和对象的概念

c.理解阿里云对象存储OSS的优势和适用场景

d.理解块存储的概念

e.掌握阿里云中使用块存储

### 3.阿里云存储

#### 3.1阿里云对象存储OSS的概念

常见的存储结构：

​	在计算机使用过程中，经常会遇到下面三种存储结构。

![20.存储结构](20.%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.png)

阿里云对象存储OSS（Object Storage Service）时阿里云提供的海量、安全、低成本、高可靠的云存储服务。可以在任何应用、任何时间、任何地点存储和访问任意类型的数据。

OSS中的概念：

![21.OSS中的概念](21.OSS%E4%B8%AD%E7%9A%84%E6%A6%82%E5%BF%B5.png)

#### 3.2 OSS的优势和使用场景

阿里云OSS的优势主要有：

方便快捷的使用方式、强大灵活的安全机制、丰富强大的增值服务、数据冗余机制

![22.OSS主要优势](22.OSS%E4%B8%BB%E8%A6%81%E4%BC%98%E5%8A%BF.png)

阿里云OSS对比自建对象存储：

![23.阿里云OSS和自建对象存储对比](23.%E9%98%BF%E9%87%8C%E4%BA%91OSS%E5%92%8C%E8%87%AA%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%AF%B9%E6%AF%94.png)

#### 3.3如何使用阿里云OSS

##### 3.3.1阿里云OSS可以使用管理控制台完成OSS的基本操作，操作流程如下：

开通OSS服务—创建存储空间—上传文件—下载文件—删除文件—删除存储空间

![24.使用OSS的步骤&流程](24.%E4%BD%BF%E7%94%A8OSS%E7%9A%84%E6%AD%A5%E9%AA%A4&%E6%B5%81%E7%A8%8B.png)

阿里云OSS将数据文件以对象(Object)的形式上传到存储空间(Bucket)中。可以进行以下操作：
1.创建一个或者多个存储空间，向每个存储空间中添加个或多个文件。
2.通过获取已上传文件的地址进行文件的分享和下载。
3.通过修改存储空间或文件的读写权限(ACL)来设置访问权限。
4.通过阿里云管理控制台、各种便捷工具以及丰富的SDK包执行基本和高级OSS操作。

##### 3.3.2创建存储空间：

开通阿里云OSS服务后，需要首先创建存储空间（Bucket）来存储文件。

创建存储空间时，常用的配置如下：

![25.OSS创建存储空间](25.OSS%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4.png)

Bucket 名称是唯一的，不能重复。

ECS和OSS地域保持一致，保证能够内网访问。

##### 3.3.3上传对象文件

创建了存储空间（Bucket）后，可以上传任何类型的文件（Object）到存储空间中。

在阿里云上传对象文件的方法主要有：（同名文件会覆盖）

![26.OSS上传对象文件](26.OSS%E4%B8%8A%E4%BC%A0%E5%AF%B9%E8%B1%A1%E6%96%87%E4%BB%B6.png)

#### 3.4 阿里云块存储

##### 3.4.1 块存储的概念

- 块存储是阿里云为云服务器ECS提供的块设备产品，具有高性能和低时延的特点，支持随机读写。可以像使用物理硬盘一样格式化并建立文件系统来使用块存储，满足大部分通用业务场景下的数据存储需求。

- 衡量块存储产品的性能指标主要包括IOPS、吞吐量和访问时延。

![27.块存储性能指标](27.%E5%9D%97%E5%AD%98%E5%82%A8%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87.png)

块存储的数据安全：

阿里云块存储的数据安全主要表现在以下几个方面：

读写稳定性、主动备份、数据擦除机制、数据加密

![28.阿里云块存储数据安全](28.%E9%98%BF%E9%87%8C%E4%BA%91%E5%9D%97%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8.png)

##### 3.4.2 阿里云块存储的分类

阿里云为云服务器ECS提供了丰富的块存储产品，包括基于分布式存储架构的云盘以及基于物理机本地硬盘的本地盘产品。

![29.阿里云块存储-本地盘和云盘](29.%E9%98%BF%E9%87%8C%E4%BA%91%E5%9D%97%E5%AD%98%E5%82%A8-%E6%9C%AC%E5%9C%B0%E7%9B%98%E5%92%8C%E4%BA%91%E7%9B%98.png)

云盘的类型：

类似硬盘，可以对挂载到ECS实例上的云盘做分区、格式化、创建文件系统等操作，并持久化存储数据。

根据性能分类，云盘包含以下几类产品：

ESSD云盘、SSD云盘、高效云盘、普通云盘。

| 类型     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| ESSD云盘 | 基于新一代分布式块存储架构的超高性能云盘产品，结合25GE网络和RDMA技术，单盘可提供100万的随机读写能力和更低的单路时延能力。 |
| SSD云盘  | 具备稳定的高随机读写性能、高可靠性的高性能云盘产品。         |
| 高效云盘 | 具备高性价比、中等随机读写性能、高可靠性的云盘产品。         |
| 普通云盘 | 具备高可靠性、一般随机读写性能的云盘产品。                   |

云盘的数据类型：

根据存储的数据类型和云盘的创建方式，云盘可以作为系统盘和数据盘使用。

单台实例上限：系统盘1，数据盘≤ 16

![30.云盘的数据类型](30.%E4%BA%91%E7%9B%98%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png)

一块云盘只能挂载到同一地域、同一可用区的一台ECS实例。

##### 3.4.3 块存储与对象存储

阿里云提供了三种常见的数据存储场景产品，分别是块存储、对象存储OSS和文件存储NAS。

![31.阿里云数据存储场景产品](31.%E9%98%BF%E9%87%8C%E4%BA%91%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%9C%BA%E6%99%AF%E4%BA%A7%E5%93%81.png)

块存储 VS OSS：

对比图如下：

![32.对象存储与块存储对比](32.%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E4%B8%8E%E5%9D%97%E5%AD%98%E5%82%A8%E5%AF%B9%E6%AF%94.png)

##### 3.4.4 块存储的使用

使用流程： **地域可用区必须保证一致**

创建云盘—挂载云盘—分区—格式化—挂载

![33.块存储的流程](33.%E5%9D%97%E5%AD%98%E5%82%A8%E7%9A%84%E6%B5%81%E7%A8%8B.png)

做LVM不要做快照。快照是依据硬盘 备份的。

挂载数据盘：

![34.挂载数据盘](34.%E6%8C%82%E8%BD%BD%E6%95%B0%E6%8D%AE%E7%9B%98.png)

分区格式化数据盘：

阿里云块存储支持的分区格式包括MBR和GPT

​	MBR只支持不大于2TB的容量，最多4个主分区。

ECS中使用的分区工具和文件系统：

Windows：磁盘管理、MBR\GPT、NTFS\FAT

Linux：fdisk\parted、MBR\GPT 、vfat\ext3\ext4\xfs\btrfs

在linux系统中，分区和格式化后还需要执行的操作

- 挂载：mount
- 开机自动挂载：分区挂载信息写入/etc/fatab

------

### 4.阿里云网络服务

目标：

1.理解阿里专有网络VPC的概念

2.了解VPC的架构

3.掌握VPC的使用

4.理解负载均衡SLB的概念

5.理解SLB的原理

6.掌握SLB的配置

7.了解弹性伸缩AS的概念

8.理解AS的使用场景、配置流程

#### 4.1 理解阿里专有网络VPC的概念

##### 4.1.1 VPC的概念

- 专有网络VPC（Virtual Private Cloud）是基于阿里云构建的一个隔离的网络环境，专有网络之间逻辑上彻底隔离。

- VPC主要提供了两个能力：
  - 用户可以自定义网络拓扑，包括选择自有IP地址范围、划分网段、配置路由表和网关等。
  - 通过专线或VPN与原有数据中心连接，云上和云下的资源使用同一个网络地址规划，实现应用的平滑迁移上云。

**VPC的组成部分：**

每个VPC都由一个路由器、至少一个私网网段和至少一个交换机组成。

路由器：（路由器VRouter）专有网络的枢纽。

交换机：交换机（VSwitch）组成专有网络的基础网络设备。

私网网段：在创建专有网络和交换机时，需要以CIDR地址块的形式指定专有网络使用的私网网段。



![35.VPC的组成部分](35.VPC%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86.png)

##### 4.1.2 VPC连接

公网连接技术：

可以使用下表中的产品或功能，将专有网络和公网（Internet）打通。

![36.公网连接技术](36.%E5%85%AC%E7%BD%91%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.png)

**VPC之间的互通：**

VPC可以有效的实现网络的隔离，不同VPC之间连接技术：

| 产品     | 功能                                                      | 优势                                                         |
| -------- | --------------------------------------------------------- | ------------------------------------------------------------ |
| 云企业网 | 支持将多个不同地域、不同账号的VPC连接起来，构建互联网络。 | 一网通天下、低时延高速率、就近接入与最短链路互通、链路冗余及容灾、系统化管理。 |
| VPN网管  | 可以通过在两个VPC之间创建IPsec连接，建立加密通信通道。    | 安全、高可用、低成本、配置简单                               |

云企业网构建跨地域的VPC互通需要收取流量费用。

**本地IDC上云：**

以使用以下的产品或功能，将本地IDC和云上专有网络打通，构建混合云架构。

![37.本地IDC上云](37.%E6%9C%AC%E5%9C%B0IDC%E4%B8%8A%E4%BA%91.png)

##### 4.1.3 VPC的基础架构

VPC逻辑架构：

- 基于隧道技术和软件定义网络（Software Defined Network ，简称SDN）技术，阿里云的研发在硬件网关和自研交换机设备的基础上实现了VPC产品。

- VPC包含交换机、网关和控制器三个重要的组件。交换机和网关组成了数据通路的关键路径，控制器使用自研的协议下发转发表到网关和交换机，完成了配置通路的关键路径。

<img src="38.VPC%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84.png" alt="38.VPC逻辑架构" style="zoom:80%;" />

**网络规划：**

在创建VPC和交换机前，需要结合具体的业务规划VPC和交换机的数量及网段等。

- ​	一个VPC：如果没有多地域部署系统的要求且各系统之间也不需要通过VPC进行隔离，那么推荐使用一个VPC。

- ​	多个VPC：VPC是地域级别的资源，是不能跨地域部署的。当有多地域部署系统的需求时，就必须使用多个VPC。多业务系统隔离如果在一个地域的多个业务系统需要通过VPC进行严格隔离。

交换机的规划：

- 即使只使用一个VPC，也尽量使用至少两个交换机，并且将两个交换机分布在不同可用区，这样可以实现跨可用区容灾。

网段的规划：

- 交换机的网段必须是其所属VPC网段的子集。

#### 4.2 负载均衡SLB

##### 4.2.1 SLB的概念

​	负载均衡（Service Load Balancer）是将访问流量根据转发策略分发到后端多台云服务器（ECS实例）的流量分发控制服务。负载均衡扩展了应用的服务能力，增强了应用的可用性。

- 通过设置虚拟服务地址，将添加的同一地域的多台ECS实例虚拟成一个高性能、高可用的后端服务池，并根据转发规则，将来自客户端的请求分发给后端服务器池中的ECS实例。
- 默认检查云服务器池中的ECS实例的健康状态，自动隔离移仓状态的ECS实例，消除了单台ECS实例的单点故障，提高了应用的整体服务能力。此外，负载均衡还具备抗DDoS攻击的能力，增强了应用服务的防护能力。

<img src="39.%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1SLB%E7%9A%84%E6%A6%82%E5%BF%B5.png" alt="39.负载均衡SLB的概念" style="zoom:80%;" />

**SLB的组成部分：**

负载均衡由以下三个部分组成：

- 负载均衡实例（Server Load Balancer instances）：一个负载均衡实例是一个运行的负载均衡服务，用来接收流量并将其分配给后端服务器。
- 监听（Listeners）：监听用来检查客户端请求并将请求转发给后端服务器。监听也会对后端服务器进行建康检查。
- 后端服务器（Backend Servers）：一组接收前端请求的ECS实例

**SLB的产品优势：**

阿里云SLB的产品优势主要体现在：

高可用、可扩展、低成本、安全、高并发

![40.SLB的产品优势](40.SLB%E7%9A%84%E4%BA%A7%E5%93%81%E4%BC%98%E5%8A%BF.png)



##### 4.2.2 SLB的原理

SLB的基础架构：负载均衡采用集群部署，提供四层（TCP和UDP协议）和七层（HTTP协议和HTTPS协议）的负载均衡，可实现会话同步，以消除服务器单点故障，提升冗余，保证服务的稳定性。

![41.SLB负载均衡的基础架构](41.SLB%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84.png)

SLB中提供的功能：

![42.SLB提供的功能](42.SLB%E6%8F%90%E4%BE%9B%E7%9A%84%E5%8A%9F%E8%83%BD.png)

SLB的应用场景：

负载均衡的应用场景为高访问量的业务，提高应用程序的可靠性和可用性。

<img src="43.SLB%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.png" alt="43.SLB的应用场景" style="zoom: 67%;" />

##### 4.2.3 SLB的配置

SLB的配置流程:

在开始搭建负载均衡服务前，需要确定负载均衡实例的地域、类型、付费模式等配置。

<img src="44.SLB%E7%9A%84%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B.png" alt="44.SLB的配置流程" style="zoom:61%;" />

SLB使用的注意事项：

1.规划实例地域

2.选择实例的网络类型（公网或私网）

3.选择协议类型

4.准备后端服务器

![45.SLB使用的注意事项](45.SLB%E4%BD%BF%E7%94%A8%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.png)



#### 4.3 弹性伸缩AS

##### 4.3.1 AS的概念

- 弹性伸缩（Auto Scaling）可以根据业务需求和策略设置伸缩规则，在业务需求增长时自动增加ECS实例以保证计算能力，在业务需求下降时自动减少ECS实例以节约成本。

- 弹性伸缩不仅适合业务量不断波动的应用程序，同时也适合业务量稳定的应用程序。

<img src="46.%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9%E7%9A%84%E6%A6%82%E5%BF%B5.png" alt="46.弹性伸缩的概念" style="zoom:80%;" />

AS的使用场景：

主要分为三类：弹性扩张、弹性收缩、弹性自愈



![47.弹性伸缩的场景](47.%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9%E7%9A%84%E5%9C%BA%E6%99%AF.png)

##### 4.3.2 AS的原理

弹性伸缩的工作流程：

创建好伸缩组、伸缩配置、伸缩规则、伸缩触发任务后，系统会自动化执行以下流程。

![48弹性伸缩的工作流程](48%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png)

弹性伸缩的伸缩模式：

![49.弹性伸缩的伸缩模式](49.%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9%E7%9A%84%E4%BC%B8%E7%BC%A9%E6%A8%A1%E5%BC%8F.png)



##### 4.3.3 弹性伸缩的配置

AS的使用流程：

创建伸缩组—创建伸缩配置—启用伸缩组—创建伸缩规则—创建定时任务—创建报警任务

弹性伸缩使用的功能限制：

- 弹性伸缩不支持纵向扩展，即不支持自动提升或降低ECS实例的vCPU、内存、带宽等配置。

- 部署在伸缩组内ECS实例上的应用必须是无状态并且可横向扩展的。

- 伸缩组内ECS实例可能会被自动释放，因此不适合保存会话记录、应用数据、日志等信息。

- 弹性伸缩不支持自动将ECS实例添加到Memcache实例的访问白名单。

创建伸缩组：

- 创建伸缩组和伸缩配置是实现自动伸缩的第一步，伸缩组是具有相同应用场景的ECS实例的集合，伸缩配置是伸缩组自动创建ECS实例时的模板。

- 伸缩组的配置项：

![50.伸缩组的配置项](50.%E4%BC%B8%E7%BC%A9%E7%BB%84%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9.png)

伸缩组会保证最小实例的数量

创建伸缩规则：

![51.伸缩规则](51.%E4%BC%B8%E7%BC%A9%E8%A7%84%E5%88%99.PNG)



------

### 5.阿里云云数据库

目标：

1.理解阿里云云数据库Polar DB的概念

2.理解Polar DB的特点

3.了解集群、规格等概念

4.理解阿里云数据库RDS的概念

5.理解RDS的产品选项

6.掌握云数据库的创建和连接

#### 5.1 阿里云云数据库Polar DB

##### 5.1.1 Polar DB的概念

- Polar DB是阿里云自研的下一代关系型数据库，有三个独立的引擎，分别可以100%兼容MySQL、100%兼容PostgreSQL、高度兼容Oracle语法，存储容量最高可达100TB，单库最多可扩展到16个节点，适用于企业多样化的数据库应用场景。

- Polar DB采用存储和计算分离的架构，所有计算节点共享一份数据，提供分钟级的配置升降级、秒级的故障恢复、全局数据一致性和免费的数据备份容灾服务。

- Polar DB的特点：

  1.**集群架构，计算与存储分离**：多节点集群的架构，集群中有一个Writer 节点(主节点)和多个Reader节点（读节点）。1个写节点、最多15个读节点。

  2.**读写 分离**：当应用程序使用集群地址时，Polar DB MySQL/PostgreSQL 通过内部的代理层（proxy）对外提供服务，应用程序的请求都先经过代理，然后才访问到数据库节点。

- Polar DB采用存储和计算分离的架构，所有计算节点共享一份数据，提供分钟级的配置升降级、秒级的故障恢复、全局数据一致性和免费的数据备份容灾服务。Polar DB 既融合了商业数据库稳定可靠、高性能、可扩展的特征，又具有开源云数据库简单开放、自我迭代的优势。

- Polar DB中常见概念：

  <img src="52.Polar%20DB%E5%B8%B8%E8%A7%81%E6%A6%82%E5%BF%B5.PNG" alt="52.Polar DB常见概念" style="zoom:80%;" />

##### 5.1.2 Polar DB的优势

产品优势：

**容量大**：最高100TB，简化应用开发，降低运维负担。

**高性价比**：计算与存储分离，每增加一个只读节点，只收取计算资源的费用。

**分钟级弹性**：存储和计算分离的架构，配合共享存储，使得快速升级成为现实。

**读一致性**：集群地址确保读取数据时的全局一致性避免因为主备延迟引起的不一致。

**毫秒级延迟（物理复制）**：提升主备复制的效率和稳定性。

**无锁备份**：利用存储层的快照，可以在60s内完成对2TB数据量大小的数据库的备份。



产品架构：

Polar DB 既融合了商业数据库稳定可靠、高性能、可扩展的特征，又具有开源云数据库简单开放、自我迭代的优势。

Polar DB的产品架构及其特点：

![54.Polar DB的产品架构及特点](54.Polar%20DB%E7%9A%84%E4%BA%A7%E5%93%81%E6%9E%B6%E6%9E%84%E5%8F%8A%E7%89%B9%E7%82%B9.PNG)



#### 5.2 云数据库RDS

##### 5.2.1 RDS的概念

- 阿里云关系型数据库RDS（Relationship Database Service）是一种稳定可靠、可弹性伸缩的在线数据库服务。基于阿里云分布式文件系统和SSD盘高性能存储，RDS支持MySQL、SQL Server、PostgreSQL、PPAS（Postgre Plus Advanced Server，高度兼容Oracle 数据库）和MariaDB TX引擎，并且提供了容灾、备份、恢复、监控、迁移等方面的全套解决方案。

<img src="55.RDS%E7%9A%84%E7%89%B9%E7%82%B9.PNG" alt="55.RDS的特点" style="zoom:80%;" />

RDS的相关概念：

地域和可用区的概念与其他阿里云云产品定义相同。

| 概念       | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| 实例       | 实例是虚拟化的数据库服务器，在一个实例中可以创建和管理多个数据库。 |
| 数据库引擎 | RDS支持多种数据库引擎，如MySQL、SQL Server、PostgreSQL、PPAS（Postgre Plus Advanced Server，高度兼容Oracle 数据库）和MariaDB |
| 网络类型   | 可以选择将实例创建在经典网络或专有网络VPC中。VPC安全性高，建议使用VPC。 |
| 产品系列   | 基础版、高可用版、集群版和三节点企业版                       |
| 规格族     | 通用型、独享型、独占物理机型                                 |
| 存储类型   | SSD本地盘、SSD云盘、ESSD云盘                                 |



RDS和自建数据库：

以RDS MySQL为例对比阿里云ECS自建数据库和用户IDC自建数据库。

![56. RDS对比自建数据库](56.%20RDS%E5%AF%B9%E6%AF%94%E8%87%AA%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93.PNG)

![56. RDS对比自建数据库2](56.%20RDS%E5%AF%B9%E6%AF%94%E8%87%AA%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%932.PNG)

##### 5.2.2 RDS的产品选型

RDS的产品系列

​	在使用RDS的过程中，需要注意的选择的内容主要有：产品系列、实例规格族和存储类型。

RDS各产品系列对比：

![57.RDS产品系列对比](57.RDS%E4%BA%A7%E5%93%81%E7%B3%BB%E5%88%97%E5%AF%B9%E6%AF%94.PNG)

RDS实例规格族的分类：

| 规格族 | 描述                                                         | 适用场景                                                     |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 共享型 | 1.**独享被分配的内存**，与同一物理机上的其他共享型实例**共享CPU资源和存储资源**。2.通过资源复用换取CPU使用率最大化，性价比比较高，享受规模红利。3.实例有资源争抢风险 | 追求**高性价比**，需要**减轻使用成本**；**稳定性要求较低**，需要数据库高可用保障业务可用性 |
| 通用型 | 1.**独享被分配的内存**，与同一物理机上的其他通用型实例**共享CPU和存储资源**。2.通过资源复用享受规模红利，性价比较高。CPU资源轻微复用，复用率小于共享型实例。3.存储大小不和CPU/内存绑定，可以灵活选配。 | 对**性能稳定性要求较低**的应用场景                           |
| 独享型 | 具有**完全独享**的CPU和内存，性能长期稳定，不会因为物理机上其它实例的行为而受到影响。独享型的顶配是独占物理机，也称为独占主机型，完全独占一台物理机的所有资源。 | 以**数据库为核心系统**的业务场景，例如金融、电商、政务、大中型互联网业务等。 |

![58.RDS实例规格族](58.RDS%E5%AE%9E%E4%BE%8B%E8%A7%84%E6%A0%BC%E6%97%8F.PNG)

![59.RDS实例规格族对比](59.RDS%E5%AE%9E%E4%BE%8B%E8%A7%84%E6%A0%BC%E6%97%8F%E5%AF%B9%E6%AF%94.PNG)

存储类型：

为满足不同场景的需求，云数据库RDS提供三种数据存储类型：

本地SSD盘、SSD云盘、ESSD云盘。

<img src="60.RDS%E6%8F%90%E4%BE%9B%E7%9A%84%E5%AD%98%E5%82%A8%E7%B1%BB%E5%9E%8B.PNG" alt="60.RDS提供的存储类型" style="zoom: 67%;" />

 

#### 5.3 云数据库的使用

##### 5.3.1 Polar DB MySQL的管理步骤

​	Polar DB MySQL的使用流程：

从购买Polar DB（创建新集群） 到可以开始使用，需要完成如下操作：（云数据库Polar DB）

**创建数据库集群——设置集群白名单——创建数据库账号——查看连接地址——连接数据库集群**

1.阿里云控制台中找到—云数据库Polar DB——最小2节点

2.设置白名单——点击集群——新增IP白名单分组

3.创建数据库账号——控制台中的账号管理——创建账号

- 高权限账号：
  - 只能通过控制台创建和管理。
  - 一个集群只能有一个高权限账号，可以管理所有普通账号和数据库。
  - 开放了更多权限可满足个性化和精细化的权限管理需求，例如可按用户分配不同表的查询权限。
  - 拥有集群中所有数据库的所有权限。
  - 可以断开任意账号的连接。

- 普通账号
  - 可以通过控制台或者SQL语句创建和管理。
  - 一个集群可以创建多个普通账号，具体的数量与数据库内核有关。
  - 需要手动给普通账号授予特定数据库的权限。
  - 普通账号不能创建和管理其他账号，也不能断开其他账号的连接。

 4.查看连接地址和连接数据库集群

在连接Polar DB集群时，需要填写Polar DB集群的连接地址。**Polar DB提供了集群地址和主地址**：

| 地址类型             | 地址说明                                                     | 支持网络类型 | 查看方式                                     |
| -------------------- | ------------------------------------------------------------ | ------------ | -------------------------------------------- |
| 集群地址**（推荐）** | 应用程序只需连接一个集群地址，即可连接到多个节点。带有读写分离功能，写请求和自动发往主节点，读请求会自动根据各节点的负载发往主节点或只读节点。 | 私网和公网   | 找到目标集群单机集群的ID。在访问信息区域查看 |
| 主地址               | 总是连接到主节点，支持读和写操作。当主节点发生故障时，主访问地址会自动切换到新的主节点 | 私网和公网   | 同上                                         |

私网地址：可以发挥Polar DB的最佳性能，私网地址无法释放，适用于阿里云内资源高速互联。

公网地址：需要手动申请公网连接地址，也可以释放，适用于公网访问数据库集群进行维护操作。

<img src="61.RDS%E9%9B%86%E7%BE%A4%E8%BF%9E%E6%8E%A5%E5%9C%B0%E5%9D%80.PNG" alt="61.RDS集群连接地址" style="zoom: 67%;" />

<img src="62.RDS%E5%85%AC%E7%A7%81%E7%BD%91%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2.png" alt="62.RDS公私网管理页面" style="zoom:50%;" />

##### 5.3.2 Polar DB MySQL的连接

1.使用DMS连接数据库集群

​	Polar DB MySQL集群支持使用DMS（Data Management Service）和通用MySQL客户端连接。

​	DMS是阿里云提供的图形化的数据管理工具，它是一种集数据管理、结构管理、访问安全、BI图标、数据趋势、数据轨迹、性能与优化和服务器管理于一体的数据管理服务。支持对关系型数据库（MySQL、SQL Service、PostgreSQL）和NoSQL数据库（MongoDB、Redis等）的管理。同时还支持Linux服务器管理。

<img src="63.DMS%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E7%BE%A4.PNG" alt="63.DMS连接数据库集群" style="zoom:61%;" />

控制台中——登录数据库

<img src="64.DMS%E7%99%BB%E5%BD%95%E6%95%B0%E6%8D%AE%E5%BA%93.PNG" alt="64.DMS登录数据库" style="zoom: 50%;" />

2.客户端工具——HeidiSQL客户端等

3.命令行

```
mysql -h <连接地址> -P <端口> -u<用户名>  -p <密码>  -D<数据库>
```

##### 5.3.3 Polar DB MySQL的数据管理

数据迁移/同步方案：

- 云数据库Polar DB 提供了 多种数据迁移同步方案，可满足不同上云、迁云、同步的业务需求，可以在不影响业务的情况下平滑将数据库迁移、同步至阿里云云数据库PolarDB上面。

- 通过使用阿里云数据传输服务(DTS)，可以实现Polar DB的结构迁移、全量迁移和实时同步。

DTS的特点：

- ​	极高的链路稳定性和数据可靠性。
- 数据传输支持同/异数据源之间的数据交互，提供数据迁移/订阅/同步交互功能。
- 支持节点的故障容灾，可实现链路的秒级恢复。
- 支持断点续传，可有效解决因硬件、网络等异常导致的传输中断。
- DTS支持RAM主子账号体系，用户可以使用子账号创建并管理DTS实例，提高企业安全性。

数据迁移：

数据迁移提供多种迁移类型：结构对象迁移、全量数据迁移及增量数据迁移。如果需要实现不停服迁移，需要选择结构对象迁移、全量数据迁移及增量数据迁移。

<img src="65.Polar%20DB%20%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%9C%BA%E6%99%AF.PNG" alt="65.Polar DB 数据迁移场景" style="zoom:67%;" />

数据同步：

实时同步功能能够实现两个数据源之间的增量数据实时同步。

<img src="66.Polar%20DB%20%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5.PNG" alt="66.Polar DB 数据同步" style="zoom:67%;" />

### 6 阿里云CDN

掌握：

1.内容分发网络CDN的概念

2.理解阿里云内容分发CDN的优势

3.掌握内容分发网络CDN的工作原理

4.了解内容分发网络CDN的使用流程

#### 6.1 阿里云内容分发网络CDN

##### 6.1.1 CDN的概念

CDN解决的问题：

- 最后一公里的传输

  - 用户与服务器物理距离远，多次网络转发，延时高，且不稳定。
  - 现金的分布式系统架构，国内节点数最多的云CDN：全球1500+

- 弹性带宽、低成本

  - 资源弹性扩展，按实际使用量付费，接入即可实现跨运营商、跨地域的全网覆盖。
  - 先用后付，提供按流量或峰值带宽两种计费方式，满足不同业务需求。

- 减少源站压力，节省源站带宽成本

  - 对于网站突发流量，无需用户干预，自动作出响应和调整，有效减少源站压力。
  - CDN是公认的最具性价比的解决方案。

  <img src="67.CDN.PNG" alt="67.CDN" style="zoom:50%;" />

阿里云CDN的概念：

- 阿里云内容分发网络（Content Delivery Network简称CDN）是建立并覆盖在承载网之上，由分布在不同区域的边缘节点服务器群组成的分布式网络。阿里云CDN分担源站压力，避免网络拥塞，确保在不同区域、不同场景下加速网站内容的分发，提高资源访问速度。

- 阿里云CDN将源站资源缓存至阿里云遍布全球的加速节点上，当终端用户请求访问和获取资源时，无需回源，系统自动调用离终端用户最近的CDN节点上已缓存的资源。

 CDN相关产品：

| 相关产品     | 用途                                                         |
| ------------ | ------------------------------------------------------------ |
| 对象存储OSS  | 在OSS中使用CDN加速，提高网站访问速度，有效降低OSS的外网流量费用 |
| 视频直播     | 直播中应用CDN，实现媒资存储、切片转码、访问鉴权、内容分发加速一体化解决方案 |
| 视频点播     | 点播中应用CDN，减少缓冲时间，实现高流畅度的播放体验          |
| 阿里云云解析 | 借助阿里云云解析提供强大稳定的解析调度入口，确保顺畅的访问体验 |
| 云服务器ECS  | 借助云服务器ECS提高网站可用性，保护服务器源站信息，降低带宽使用成本 |
| 负载均衡     | 可以将负载均衡服务器的IP地址设置为回源地址，降低回源带宽压力 |

![68.CDN相关产品](68.CDN%E7%9B%B8%E5%85%B3%E4%BA%A7%E5%93%81.PNG)

##### 6.1.2 阿里云CDN的工作原理

假设加速域名为www.a.com，接入CDN网络，开始使用加速服务后，当终端用户（北京）发起HTTP请求时，处理流程如下图所示：

<img src="70.CDN%20%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%BE%E4%BE%8B.png" alt="70.CDN 工作原理举例" style="zoom:67%;" />

CDN的衡量指标：

可以根据以下几个主要性能指标，观察使用CDN前后网站的情况。这些指标包含但不限于：

![71.CDN性能指标](71.CDN%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87.png)

由于业务场景和业务类型的不同，即使选择了相同配置的CDN服务，实际产生的加速效果也不相同。

##### 6.1.3 CDN中的常见名词

CDN的常见名词：

CNAME记录：别名，用来把一个域名解析到另一个域名，再由另一个域名提供IP地址。

CNAME域名：接入CDN，在阿里云控制台添加加速域名后，阿里云CDN将分配一个CNAME域名。

DNS：域名解析服务—把域名转换为网络可以识别的IP地址。

边缘节点：在阿里云中，边缘节点、CDN节点、Cache节点、缓存节点、加速节点、阿里云节点、节点等都指阿里云边缘节点。

源站：实际业务的服务器。源站类型可以选择OSS域名、IP、源站或函数计算域名。

回源：CDN节点未缓存请求资源或缓存资源已到期时，回源站获取资源，返回给客户端。

**CDN的使用场景：**

CDN的使用场景，分为静态内容加速、动态内容加速和安全加速。其中，阿里云CDN只针对于静态内容甲酸的使用；动态内容加速需使用阿里云全站加速；安全加速需使用阿里云安全加速。

阿里云CDN的业务场景：

| 业务场景   | 场景概述                                                     |
| ---------- | ------------------------------------------------------------ |
| 图片小文件 | 网站或应用APP的主要业务为图片和小文件下载，包含各类型图片、和html、css、js小文件等。 |
| 大文件下载 | 网站或应用APP的主要业务为大文件下载，平均单个文件大小在20M以上，如游戏、各类客户端下载和app下载商店等。 |
| 视音频点播 | 网站或应用APP的主要业务为视频点播或短视频类。支持MP4、FLV等主流视频格式。 |
| 全站加速   | 全站加速是阿里云一款独立产品，主要用于动态内容加速，也可以实现动静分离加速。 |
| 安全加速   | 安全加速适用于游戏、金融、政企安防、电商、医疗领域等易受攻击又必需兼顾加速的业务场景。 |

![72.CDN业务场景](72.CDN%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF.png)

#### 6.2 CDN的使用（不分地域）

CDN的操作流程：

开通CDN服务—>添加加速域名—>配置CNAME—>验证——>停止CDN服务。

添加加速域名：

- 如果需要使用CDN加速指定网站上的业务，则需要将该网站作为源站，为其创建加速域名。

- CDN通过加速域名将源站上的资源缓存到CDN的加速节点，实现资源访问加速。

![73.CDN加速域名注意事项](73.CDN%E5%8A%A0%E9%80%9F%E5%9F%9F%E5%90%8D%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.png)

配置CNAME记录：

- 域名添加成功以后，阿里云CDN会分配对应的CNAME地址。**如果想启用CDN加速服务，则需要将加速域名指向CNAME地址，访问加速域名的请求才能转发到CDN节点上，达到加速效果**。

- 不同的DNS服务商修改CNAME记录方式略有不同，请参考相应DNS服务商进行配置。

配置成功后，可以通过ping或者dig命令来验证CNAME 记录是否已经生效。

停止CDN：

- 当不想使用CDN加速服务时，可以在CDN控制台上删除指定加速域名。删除加速域名后，不会产生任何费用。
- 在域名管理界面，单击目标域名对应下图红框中的图标，选择删除。

![74.停止CDN](74.%E5%81%9C%E6%AD%A2CDN.PNG)

需要临时停止指定域名的加速服务时，可以选择停用。停止加速服务后，不会产生任何费用。

停止CDN时，需要注意CNAME，否则网站访问会不可用。



### 7 阿里云云上安全防护

掌握：

1.了解云计算常见威胁

2.理解云安全体系

3.了解阿里云DDos攻击防护

4.理解Web应用防火墙

5.理解阿里云监控

#### 7.1 阿里云安全体系

##### 7.1.1 云计算常见威胁

网络安全概述：

针对网络中的一个运行系统而言，网络安全是指网络系统的硬件、软件及其系统中的信息受到保护。包括系统连续、可靠、正常的运行，网络服务不中断，系统中的信息不因偶然的或恶意的行为而遭到破坏、更改或泄露。

<img src="75.%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8.PNG" alt="75.网络安全" style="zoom: 50%;" />

云计算安全新的挑战：

- 传统集中式管理方式有很大安全问题，云计算的多租户、分布性、对网络和服务提供者的依赖性，为安全问题带来新的挑战。除了传统信息系统的安全问题外，云计算由于其本身的特点，带来了新的安全威胁。
- 云计算安全风险主要包括:
  - 数据丢失或泄露
  - 系统和技术漏洞
  - 账号与身份管理不善
  - 数据集中的安全问题
  - API安全存疑、Dos攻击泛滥

![76.云计算安全风险](76.%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9.PNG)





##### 7.1.2 阿里云云上安全

云上安全是由阿里云和用户共同负责构建云安全环境。

![77.云上安全](77.%E4%BA%91%E4%B8%8A%E5%AE%89%E5%85%A8.png)

阿里云安全体系：

![78.阿里云安全体系](78.%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%89%E5%85%A8%E4%BD%93%E7%B3%BB.png)

#### 7.2 阿里云云监控安全产品

##### 7.2.1 阿里云DDos防护

- 分布式拒接服务（Distributed Denial of Service，简称DDos ）将多台计算机联合起来作为攻击平台，通过远程连接利用恶意程序，对一个或多个目标发起DDos攻击，消耗目标服务器性能或网络带宽，从而造成服务器无法正常地提供服务。
- DDos攻击会对业务造成以下危害。
  - 重大经济损失：在遭受DDos攻击后，源站服务器可能无法提供服务，导致用户无法访问业务，从而造成巨大的经济损失和品牌损失。
  - 数据泄露：黑客在对服务器进行DDos攻击时，可能会趁机窃取业务的核心数据。
  - 恶意竞争：部分行业存在恶性竞争，竞争对手可能会通过DDos攻击恶意攻击服务，从而在行业竞争中获取优势。

阿里云DDos原生防护（防护包）：

- DDos原生防护是一款针对阿里云ECS、SLB、Web应用防火墙、EIP等产品直接提升DDos防御能力的安全产品。相比于DDos高防，DDos原生防护可以直接把防御能力加载到云产品上，不需要更换IP、也没有四层端口、七层域名数等限制。同时，DDos原生防护部署简易，购买后只需要绑定需要防护的云产品的IP地址即可使用，几分钟内生效。
  - 基础班：默认为阿里云资源公网IP免费开启，无需购买。提供不超过5Gbps的DDos基础防护能力。
  - 企业版：购买后开启，支持防护阿里云资源公网IP，例如ECS、SLB、EIP、WAF。
  - 企业版仅支持特定地域。

DDos高防：

- DDos高防（Anti-DDoS）是阿里云提供的DDoS攻击代理防护服务。当用户的互联网服务器遭受大流量的DDos攻击时，DDoS高防可以保护其应用服务持续可用。DDoS高防通过DNS解析调度流量到阿里云高防网络，代理接入阿里云DDoS防护系统，抵御流量型和资源耗尽型DDoS攻击。
- DDos高防支持通过DNS解析和IP直接指向两种引流方式，实现网站域名和业务端口的接入防护。根据用户在DDoS高防服务中为业务配置的转发规则，DDoS高防将业务的DNS域名解析或业务IP指向DDoS高防实例IP或CNAME地址进行引流。
- 来自公网的访问流量都将优先经过高防机房，恶意攻击流量将在高防流量清洗中心进行清洗过滤，正常的访问流量通过端口协议转发的方式返回给源站服务器，从而保障源站服务器的稳定访问。

DDoS高防应用场景：

1.遭受恶意攻击者的DDoS攻击勒索。

2.DDoS攻击已经导致业务不可用，需要紧急恢复。

3.频繁遭受DDoS攻击，需要持续防护DDoS攻击，保护业务的稳定性。

![79.DDoS高防应用场景](79.DDoS%E9%AB%98%E9%98%B2%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.png)

DDoS高防防护网站流程：

使用DDoS高防防护网站业务时，可以按照以下步骤进行操作：

步骤1：添加网站业务转发规则。

步骤2：接入网站业务流量。

步骤3：设置网站业务防护策略。

步骤4：查看网站业务防护数据。

DDoS高防除了可以防御最常用的网站类业务，同时也支持防护非网站类业务。

##### 7.2.2 Web应用防火墙

Web应用防火墙介绍：

- 云盾Web应用防火墙（Web Application Firewall，简称WAF）基于云安全大数据能力，用于防御SQL注入、XSS跨站脚本、常见Web服务器插件漏洞、木马上传、非授权核心资源访问等OWASP常见攻击，并过滤海量恶意CC攻击，避免您的网站资产数据泄露，保障网站的安全与可用性。
- Web应用安全防护

|        类型         |                             说明                             |
| :-----------------: | :----------------------------------------------------------: |
| 常见Web应用攻击防护 | 防御OWASP常见威胁：支持防御以下常见威胁：SQL注入、XSS跨站、Webshell上传、后门隔离保护、命令注入、非法HTTP协议请求、常见Web服务器漏洞攻击、核心文件非授权访问、路径穿越、扫描防护等。 |
|    深度精确防护     | 支持全解析多种常见HTTP协议数据提交格式、支持解码常见编码类型 |
|   CC恶意攻击防护    | 1.对单一源IP的访问频率进行限制，基于重定向跳转验证，人脸识别等。2.针对海量慢速请求攻击，根据统计响应码及URL请求分布、异常Referer及User-Agent特征识别，结合网站精准防护规则进行综合防护。 |
|    精准访问控制     | 1.提供友好的配置控制台界面，支持IP、URL、Referer、User-Agent等HTTP常见字段的条件组合，配置强大的精准访问控制策略。2.与Web常见攻击防护、CC防护等安全模块结合，搭建多层综合保护机制；依据需求，轻松识别可信与恶意流量。 |
|      虚拟补丁       | 在Web应用漏洞补丁发布和修复之前，通过调整Web防护策略实现快速防护。 |

阿里云WAF优势：

云盾Web应用防火墙具有部署简易、防护及时精确、大数据驱动、高可靠等优势。

![80.阿里云WAF优势](80.%E9%98%BF%E9%87%8C%E4%BA%91WAF%E4%BC%98%E5%8A%BF.png)

接入WAF：

- 使用Web应用防火墙之前，必须将要防护的网站接入Web应用防火墙。网站接入默认使用的DNS配置模式，需要在Web应用防火墙添加域名，设置网站流量的转发信息，并修改域名的DNS解析设置，将网站流量解析到Web应用防火墙进行防护。
- 开通Web应用防火墙服务后，可以使用以下两种方式将网站接入Web应用防火墙进行防护。
  - 1.DNS配置模式（推荐）：通过修改域名的DNS解析设置，将网站流量解析到Web应用防火墙，Web应用防火墙将处理后的请求发回源站服务器。
  - 2.透明代理模式：无需修改域名的DNS解析设置，支持直接牵引源站ECS公网IP 80端口接收到的HTTP协议的流量到Web应用防火墙，经Web应用防火墙处理后再将正常的访问流量转发回源站服务器。

![81.接入WAF两种方式](81.%E6%8E%A5%E5%85%A5WAF%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F.png)



##### 7.2.3 云安全中心

云安全中心介绍：

- 云安全中心是一个实时识别、分析、预警安全威胁的统一安全管理系统，通过防勒索、防病毒、防篡改、合规检查等安全能力，实现威胁检测、响应、溯源的自动化安全运营闭环，保护云上资产和本地服务器并满足监管合规要求。
- 云安全中心提供基础版、基础杀毒版、高级版和企业版多个版本：

|    版本    |                             说明                             |
| :--------: | :----------------------------------------------------------: |
|   基础版   | 免费为您提供基础的安全加固能力，可检测服务器异常登录及DDoS攻击、服务器主流类型的漏洞以及云产品安全配置。在购买ECS实例时选择安全加固即可开通基础版。 |
| 基础杀毒版 | 按照包年包月方式收取服务费用，提供安全告警、病毒防御等服务。 |
|   高级版   | 按照包年包月方式收取服务费用，提供安全告警、病毒防御、漏洞检测及修复、安全报告等服务。 |
|   企业版   | 按照包年包月方式收取服务费用，提供安全告警、病毒防御、漏洞检测及修复、基线检查、资产指纹、攻击分析等全面的服务。 |

云安全支持7天免费试用企业版功能。

**云安全中心产品优势**：

- 安全事件告警和检索：实时监控安全事件并提供处理建议，对告警事件进行分析和检索，抵御恶意入侵。
- 漏洞和基线配置检测：自动检测并呈现服务器资产的漏洞和风险配置，提供修复建议，巩固系统安全。
- 安全风险量化和预测：通过机器学习，量化分析威胁，预测潜在的安全风险。
- 安全可视化界面：提供安全可视化界面，全面并实时地感知安全问题。
- 支持病毒云查杀：病毒云查杀提供全面的和实时的病毒检测和防护服务。
- 符合多项国标安全认证标准：云安全中心已通过ISO等多项认证。

![82.云安全中心优势](82.%E4%BA%91%E5%AE%89%E5%85%A8%E4%B8%AD%E5%BF%83%E4%BC%98%E5%8A%BF.png)

云安全中心使用流程：

Agent插件时云安全中心提供的本地安全插件，必须要在防护的服务器上安装该插件才能使用云安全中心的服务。

第一步：云安全中心自动为服务器资产开通基础版本功能。基础班仅提供主机异常登录检测、漏洞检测、云产品安全配置项检测。

第二步：购买云安全中心服务后，可以在云安全中心控制台的总览页面，查看资产当前的安全得分；购买ECS实例时，选择安全加固即可自动安装Agent并开通云安全中心基础版，无需手动安装。

第三步：购买云安全中心服务后，可以在云安全中心总览页面查看当前阿里云账号下的服务器安全状态，以及安全告警事件、主机漏洞扫描结果、系统配置风险情况。

![83.云安全中心使用流程](83.%E4%BA%91%E5%AE%89%E5%85%A8%E4%B8%AD%E5%BF%83%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B.png)



#### 7.3 阿里云云监控

##### 7.3.1 云监控的概念

- 云监控（CloudMonitor）是一项针对阿里云资源和互联网应用进行监控的服务。

- 云监控为云上用户提供开箱即用的企业级开放型一站式监控解决方案。云监控涵盖IT设施基础监控和外网网络质量拨测监控，是基于事件、自定义指标和日志的业务监控，全方位提供更高效、全面、省钱的监控服务。

![84.云监控](84.%E4%BA%91%E7%9B%91%E6%8E%A7.png)

云监控的优势：

- 云监控结合阿里云云计算平台强大的数据分析能力，提供云服务监控、站点监控和自定义监控，云产品、业务保驾护航。
- 主要有以下优势：
  - 天然集成：云监控服务无需特意购买和开通。
  - 数据可视化：云监控通过Dashboard提供丰富的图表展现形式。
  - 监控数据处理：云监控支持通过Dashboard对监控数据进行时间维护和空间维护的聚合处理。
  - 灵活报警：云监控还为提供监控项的报警服务。

云监控提供了非常丰富的使用场景：

|       场景       |                             描述                             |
| :--------------: | :----------------------------------------------------------: |
|    云服务监控    | 购买和使用了云监控支持的阿里云服务后，即可方便地在云监控对应的产品页面查看您的产品运行状态、各个指标的使用情况并对监控项设置报警规则。 |
|     系统监控     | 通过监控ECS的CPU使用率、内存使用率、公网流出流速（带宽）等基础指标，确保实例的正常使用，避免因为对资源的过度使用造成用户业务无法正常运转。 |
| 及时处理异常场景 | 云监控会根据设置的报警规则，在监控数据达到报警阈值时发送报警信息，及时获取异常通知，查询异常原因。 |
|   及时扩容场景   | 对带宽、连接数、磁盘使用率等监控项设置报警规则后，可以方便的了解云服务现状，在业务量变大后及时收到报警通知以便进行服务扩容。 |
|     站点监控     | 站点监控服务目前提供HTTP（HTTPS）、ICMP、TCP、UDP、DNS、SMTP、POP3、FTP等8种协议的监控设置，可探测站点的可用性、响应时间、丢包率，让您全面了解站点的可用性并在异常时及时处理。 |
|    自定义监控    | 自定义监控补足了云服务监控的不足，如果云监控服务未能提供需要的监控项，那么可以创建新的监控项并采集监控数据上报到云监控，云监控会对新的监控项提供监控图标展示和报警功能。 |



##### 7.3.2 云监控的使用

主机监控：

主机监控的应用场景如下：

- 混合云场景下监控解决方案云监控通过插件采集用户服务器监控数据，该插件支持安装在非ECS服务器上，解决云上、云下双重环境的基础监控问题。
- 企业级用户的监控解决方案主机提供应用分组功能，支持将阿里云不同地域的服务器分配在同一分组中，真正从业务角度管理服务器。同时，提供分组维度的报警功能管理能力，一次规则设置可以作用全组，极大提升监控运维效率和管理体验。

自定义监控：

- 自定义监控提供了自由定义监控项及报警规则的功能。
- 可以针对自己关心的业务指标进行监控，将采集到的监控数据上报至云监控，由云监控来进行数据处理，并根据处理结果进行报警。
- 事件监控与自定义监控的区别：
  - 事件监控用于解决非连续性的事件类型监控数据上报、查询与报警的场景。
  - 自定义监控用于解决周期性持续采集的时间序列监控数据上报、查询与报警的场景。
